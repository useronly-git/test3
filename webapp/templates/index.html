<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–ö–æ—Ñ–µ–π–Ω—è</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
    >
    <style>
        body { background: #f5f5f5; }
        .nav-tabs .nav-link.active {
            background-color: #fff;
            border-color: #dee2e6 #dee2e6 #fff;
        }
        .menu-card {
            border-radius: 12px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.05);
            margin-bottom: 12px;
        }
        .bottom-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: #fff;
            border-top: 1px solid #ddd;
            padding: 8px 12px;
        }
    </style>
</head>
<body class="pb-5">
<div class="container mt-3 mb-5">
    <ul class="nav nav-tabs" id="mainTabs" role="tablist">
        <li class="nav-item" role="presentation">
            <button class="nav-link active" id="menu-tab" data-bs-toggle="tab"
                    data-bs-target="#menu" type="button" role="tab">
                ‚òï –ú–µ–Ω—é
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="profile-tab" data-bs-toggle="tab"
                    data-bs-target="#profile" type="button" role="tab">
                üë§ –ü—Ä–æ—Ñ–∏–ª—å
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="orders-tab" data-bs-toggle="tab"
                    data-bs-target="#orders" type="button" role="tab">
                üì¶ –ó–∞–∫–∞–∑—ã
            </button>
        </li>
    </ul>

    <div class="tab-content mt-3">
        <!-- –ú–µ–Ω—é -->
        <div class="tab-pane fade show active" id="menu" role="tabpanel">
            {% for item in menu %}
            <div class="card menu-card">
                <div class="card-body d-flex justify-content-between align-items-center">
                    <div>
                        <h5 class="card-title mb-1">{{ item.name }}</h5>
                        <p class="card-text mb-1 text-muted">{{ item.description }}</p>
                        <span class="fw-bold">{{ '%.2f' % (item.price / 100) }} ‚ÇΩ</span>
                    </div>
                    <div class="d-flex flex-column align-items-end">
                        <div class="input-group input-group-sm mb-2" style="width: 110px;">
                            <button class="btn btn-outline-secondary btn-sm qty-minus"
                                    data-id="{{ item.id }}">-</button>
                            <input type="text" class="form-control text-center qty-input"
                                   data-id="{{ item.id }}" value="0">
                            <button class="btn btn-outline-secondary btn-sm qty-plus"
                                    data-id="{{ item.id }}">+</button>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}

            <div class="mt-3">
                <label class="form-label">–ó–∞–∫–∞–∑ –∫–æ –≤—Ä–µ–º–µ–Ω–∏ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</label>
                <input type="time" class="form-control" id="pickupTime">
            </div>
        </div>

        <!-- –ü—Ä–æ—Ñ–∏–ª—å -->
        <div class="tab-pane fade" id="profile" role="tabpanel">
            <form id="profileForm" class="mt-3">
                <div class="mb-3">
                    <label class="form-label">–ò–º—è</label>
                    <input type="text" class="form-control" id="profileName">
                </div>
                <div class="mb-3">
                    <label class="form-label">–¢–µ–ª–µ—Ñ–æ–Ω</label>
                    <input type="tel" class="form-control" id="profilePhone" placeholder="+48...">
                </div>
                <button type="submit" class="btn btn-primary w-100">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            </form>
        </div>

        <!-- –ó–∞–∫–∞–∑—ã -->
        <div class="tab-pane fade" id="orders" role="tabpanel">
            <div id="ordersList" class="mt-3"></div>
        </div>
    </div>
</div>

<div class="bottom-bar d-flex justify-content-between align-items-center">
    <div>
        <span class="fw-bold">–ò—Ç–æ–≥–æ: <span id="totalPrice">0</span> ‚ÇΩ</span>
    </div>
    <button class="btn btn-success" id="btnCreateOrder">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script>
    const TG_ID = {{ tg_id or 'null' }};
</script>
<script src="/static/app.js"></script>
</body>
</html>
