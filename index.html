<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‚òï Coffee House</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
        }

        :root {
            --primary: #8B4513;
            --primary-light: #A0522D;
            --secondary: #D2691E;
            --accent: #FFD700;
            --text: #2C1810;
            --text-light: #5D4037;
            --bg: #FFF8F0;
            --card-bg: #FFFFFF;
            --border: #E0C9B8;
            --success: #4CAF50;
            --warning: #FF9800;
            --danger: #F44336;
            --shadow: 0 4px 12px rgba(139, 69, 19, 0.1);
        }

        body {
            background: var(--bg);
            color: var(--text);
            line-height: 1.6;
            max-width: 100%;
            overflow-x: hidden;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            color: white;
            padding: 25px 20px;
            border-radius: 0 0 25px 25px;
            margin-bottom: 30px;
            box-shadow: var(--shadow);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .logo h1 {
            font-size: 28px;
            font-weight: 700;
        }

        .logo-icon {
            font-size: 32px;
        }

        .nav-tabs {
            display: flex;
            gap: 10px;
            overflow-x: auto;
            padding-bottom: 10px;
            scrollbar-width: none;
        }

        .nav-tabs::-webkit-scrollbar {
            display: none;
        }

        .tab-btn {
            background: rgba(255, 255, 255, 0.15);
            border: none;
            color: white;
            padding: 12px 24px;
            border-radius: 50px;
            font-weight: 600;
            font-size: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
        }

        .tab-btn.active {
            background: var(--accent);
            color: var(--primary);
        }

        .tab-btn:hover {
            background: rgba(255, 255, 255, 0.25);
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.3s ease;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .category-card {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: var(--shadow);
            border: 1px solid var(--border);
        }

        .category-title {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
            font-size: 22px;
            color: var(--primary);
        }

        .category-icon {
            font-size: 24px;
        }

        .menu-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 15px;
        }

        .menu-item {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 20px;
            border: 1px solid var(--border);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .menu-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(139, 69, 19, 0.15);
        }

        .item-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 12px;
        }

        .item-name {
            font-weight: 700;
            font-size: 18px;
            color: var(--text);
        }

        .item-price {
            font-weight: 700;
            color: var(--primary);
            font-size: 20px;
        }

        .item-description {
            color: var(--text-light);
            font-size: 14px;
            margin-bottom: 15px;
            line-height: 1.5;
        }

        .item-sizes {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .size-btn {
            padding: 8px 16px;
            border: 2px solid var(--border);
            border-radius: 10px;
            background: transparent;
            color: var(--text);
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .size-btn.active {
            border-color: var(--primary);
            background: var(--primary);
            color: white;
        }

        .addons-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 20px;
        }

        .addon-btn {
            padding: 6px 12px;
            border: 1px solid var(--border);
            border-radius: 8px;
            background: var(--bg);
            color: var(--text-light);
            font-size: 13px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .addon-btn.active {
            border-color: var(--secondary);
            background: var(--secondary);
            color: white;
        }

        .add-btn {
            width: 100%;
            padding: 14px;
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            color: white;
            border: none;
            border-radius: 12px;
            font-weight: 700;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .add-btn:hover {
            transform: scale(1.02);
            box-shadow: 0 4px 15px rgba(139, 69, 19, 0.3);
        }

        .cart-sidebar {
            position: fixed;
            top: 0;
            right: -400px;
            width: 350px;
            height: 100vh;
            background: var(--card-bg);
            box-shadow: -5px 0 25px rgba(0, 0, 0, 0.1);
            transition: right 0.3s ease;
            z-index: 1000;
            display: flex;
            flex-direction: column;
        }

        .cart-sidebar.active {
            right: 0;
        }

        .cart-header {
            padding: 25px;
            background: var(--primary);
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .cart-title {
            font-size: 22px;
            font-weight: 700;
        }

        .close-cart {
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            padding: 5px;
        }

        .cart-items {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
        }

        .cart-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: var(--bg);
            border-radius: 12px;
            margin-bottom: 15px;
        }

        .cart-item-info h4 {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .cart-item-actions {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .quantity-btn {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            border: 2px solid var(--primary);
            background: white;
            color: var(--primary);
            font-weight: bold;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .cart-footer {
            padding: 25px;
            background: var(--bg);
            border-top: 1px solid var(--border);
        }

        .cart-total {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            font-size: 20px;
            font-weight: 700;
        }

        .checkout-btn {
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, var(--success), #45a049);
            color: white;
            border: none;
            border-radius: 15px;
            font-weight: 700;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .checkout-btn:hover {
            transform: scale(1.02);
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);
        }

        .profile-section {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 25px;
            box-shadow: var(--shadow);
        }

        .profile-header {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 30px;
        }

        .profile-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 32px;
            font-weight: bold;
        }

        .profile-info h2 {
            font-size: 24px;
            margin-bottom: 5px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text-light);
        }

        .form-input {
            width: 100%;
            padding: 15px;
            border: 2px solid var(--border);
            border-radius: 12px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--primary);
        }

        .save-btn {
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            color: white;
            border: none;
            padding: 16px 32px;
            border-radius: 12px;
            font-weight: 700;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .save-btn:hover {
            transform: scale(1.02);
            box-shadow: 0 4px 15px rgba(139, 69, 19, 0.3);
        }

        .orders-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .order-card {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 20px;
            border-left: 5px solid var(--primary);
            box-shadow: var(--shadow);
        }

        .order-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .order-number {
            font-weight: 700;
            color: var(--primary);
            font-size: 18px;
        }

        .order-status {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .status-pending { background: #FFF3CD; color: #856404; }
        .status-confirmed { background: #D1ECF1; color: #0C5460; }
        .status-preparing { background: #D4EDDA; color: #155724; }
        .status-ready { background: #CCE5FF; color: #004085; }
        .status-completed { background: #D4EDDA; color: #155724; }
        .status-cancelled { background: #F8D7DA; color: #721C24; }

        .order-details {
            color: var(--text-light);
            font-size: 14px;
        }

        .floating-btn {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            color: white;
            border: none;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 6px 20px rgba(139, 69, 19, 0.4);
            z-index: 999;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .floating-btn:hover {
            transform: scale(1.1) rotate(90deg);
        }

        .cart-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: var(--accent);
            color: var(--primary);
            width: 24px;
            height: 24px;
            border-radius: 50%;
            font-size: 12px;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .modal {
            background: var(--card-bg);
            border-radius: 25px;
            padding: 30px;
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            transform: translateY(20px);
            transition: transform 0.3s ease;
        }

        .modal-overlay.active .modal {
            transform: translateY(0);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .modal-title {
            font-size: 24px;
            font-weight: 700;
            color: var(--primary);
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 24px;
            color: var(--text-light);
            cursor: pointer;
            padding: 5px;
        }

        .radio-group {
            display: flex;
            gap: 15px;
            margin-bottom: 25px;
        }

        .radio-label {
            flex: 1;
            padding: 20px;
            border: 2px solid var(--border);
            border-radius: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .radio-label.active {
            border-color: var(--primary);
            background: rgba(139, 69, 19, 0.05);
        }

        .radio-input {
            display: none;
        }

        .time-slots {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-bottom: 25px;
        }

        .time-slot {
            padding: 12px;
            border: 2px solid var(--border);
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .time-slot.active {
            border-color: var(--primary);
            background: rgba(139, 69, 19, 0.05);
        }

        .payment-methods {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 25px;
        }

        .payment-method {
            padding: 15px;
            border: 2px solid var(--border);
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .payment-method.active {
            border-color: var(--primary);
            background: rgba(139, 69, 19, 0.05);
        }

        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }

            header {
                padding: 20px 15px;
                border-radius: 0 0 20px 20px;
            }

            .logo h1 {
                font-size: 24px;
            }

            .menu-grid {
                grid-template-columns: 1fr;
            }

            .cart-sidebar {
                width: 100%;
                right: -100%;
            }

            .time-slots {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <div class="logo-icon">‚òï</div>
                <h1>Coffee House</h1>
            </div>

            <div class="nav-tabs">
                <button class="tab-btn active" onclick="openTab('menu')">üçΩÔ∏è –ú–µ–Ω—é</button>
                <button class="tab-btn" onclick="openTab('profile')">üë§ –ü—Ä–æ—Ñ–∏–ª—å</button>
                <button class="tab-btn" onclick="openTab('orders')">üìã –ú–æ–∏ –∑–∞–∫–∞–∑—ã</button>
                <button class="tab-btn" onclick="openTab('cart')">üõí –ö–æ—Ä–∑–∏–Ω–∞</button>
            </div>
        </header>

        <!-- –ú–µ–Ω—é -->
        <div id="menu" class="tab-content active">
            <div class="category-card" id="categories-container">
                <!-- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
            </div>
        </div>

        <!-- –ü—Ä–æ—Ñ–∏–ª—å -->
        <div id="profile" class="tab-content">
            <div class="profile-section">
                <div class="profile-header">
                    <div class="profile-avatar" id="user-avatar">U</div>
                    <div class="profile-info">
                        <h2 id="user-name">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</h2>
                        <p id="user-phone">–¢–µ–ª–µ—Ñ–æ–Ω –Ω–µ —É–∫–∞–∑–∞–Ω</p>
                    </div>
                </div>

                <form id="profile-form">
                    <div class="form-group">
                        <label>–¢–µ–ª–µ—Ñ–æ–Ω</label>
                        <input type="tel" class="form-input" id="phone" placeholder="+7 (999) 123-45-67">
                    </div>

                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" class="form-input" id="email" placeholder="email@example.com">
                    </div>

                    <div class="form-group">
                        <label>–ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏</label>
                        <textarea class="form-input" id="address" rows="3" placeholder="–£–∫–∞–∂–∏—Ç–µ –∞–¥—Ä–µ—Å –¥–ª—è –¥–æ—Å—Ç–∞–≤–∫–∏"></textarea>
                    </div>

                    <div class="form-group">
                        <label>–ü—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è</label>
                        <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                            <label style="display: flex; align-items: center; gap: 5px;">
                                <input type="checkbox" name="preferences" value="sugar_free"> –ë–µ–∑ —Å–∞—Ö–∞—Ä–∞
                            </label>
                            <label style="display: flex; align-items: center; gap: 5px;">
                                <input type="checkbox" name="preferences" value="vegan_milk"> –†–∞—Å—Ç–∏—Ç–µ–ª—å–Ω–æ–µ –º–æ–ª–æ–∫–æ
                            </label>
                            <label style="display: flex; align-items: center; gap: 5px;">
                                <input type="checkbox" name="preferences" value="extra_espresso"> –î–æ–ø. —à–æ—Ç —ç—Å–ø—Ä–µ—Å—Å–æ
                            </label>
                        </div>
                    </div>

                    <button type="button" class="save-btn" onclick="saveProfile()">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</button>
                </form>
            </div>
        </div>

        <!-- –ú–æ–∏ –∑–∞–∫–∞–∑—ã -->
        <div id="orders" class="tab-content">
            <div class="profile-section">
                <h2 style="margin-bottom: 20px;">üìã –ò—Å—Ç–æ—Ä–∏—è –∑–∞–∫–∞–∑–æ–≤</h2>
                <div class="orders-list" id="orders-list">
                    <!-- –ó–∞–∫–∞–∑—ã –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
                </div>
            </div>
        </div>

        <!-- –ö–æ—Ä–∑–∏–Ω–∞ -->
        <div id="cart" class="tab-content">
            <div class="profile-section">
                <h2 style="margin-bottom: 20px;">üõí –í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞</h2>
                <div id="cart-items-container">
                    <!-- –¢–æ–≤–∞—Ä—ã –≤ –∫–æ—Ä–∑–∏–Ω–µ -->
                </div>

                <div style="margin-top: 30px; padding-top: 20px; border-top: 2px solid var(--border);">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px;">
                        <span style="font-size: 20px; font-weight: 700;">–ò—Ç–æ–≥–æ:</span>
                        <span style="font-size: 24px; font-weight: 700; color: var(--primary);" id="cart-total">0 —Ä—É–±.</span>
                    </div>

                    <button class="checkout-btn" onclick="openCheckoutModal()">üöÄ –û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>
                </div>
            </div>
        </div>
    </div>

    <!-- –ö–Ω–æ–ø–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã -->
    <button class="floating-btn" onclick="toggleCart()">
        üõí
        <span class="cart-badge" id="cart-badge">0</span>
    </button>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞ -->
    <div class="modal-overlay" id="checkout-modal">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title">üöÄ –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</h2>
                <button class="close-modal" onclick="closeCheckoutModal()">√ó</button>
            </div>

            <div class="form-group">
                <label>–¢–∏–ø –∑–∞–∫–∞–∑–∞</label>
                <div class="radio-group">
                    <label class="radio-label" onclick="selectOrderType('takeaway')">
                        <input type="radio" name="order_type" value="takeaway" class="radio-input">
                        üì¶ –ù–∞–≤—ã–Ω–æ—Å
                    </label>
                    <label class="radio-label" onclick="selectOrderType('dine_in')">
                        <input type="radio" name="order_type" value="dine_in" class="radio-input">
                        üè™ –ù–∞ –º–µ—Å—Ç–µ
                    </label>
                </div>
            </div>

            <div class="form-group">
                <label>–ö–æ–≥–¥–∞ –∑–∞–±—Ä–∞—Ç—å?</label>
                <div class="radio-group">
                    <label class="radio-label" onclick="selectDeliveryTime('asap')">
                        <input type="radio" name="delivery_time" value="asap" class="radio-input">
                        ‚ö° –ö–∞–∫ –º–æ–∂–Ω–æ —Å–∫–æ—Ä–µ–µ
                    </label>
                    <label class="radio-label" onclick="selectDeliveryTime('later')">
                        <input type="radio" name="delivery_time" value="later" class="radio-input">
                        üïí –ö–æ –≤—Ä–µ–º–µ–Ω–∏
                    </label>
                </div>

                <div id="time-slots-container" style="display: none;">
                    <div class="time-slots">
                        <!-- –°–ª–æ—Ç—ã –≤—Ä–µ–º–µ–Ω–∏ –±—É–¥—É—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã —á–µ—Ä–µ–∑ JS -->
                    </div>
                </div>
            </div>

            <div class="form-group" id="address-field">
                <label>–ê–¥—Ä–µ—Å –¥–ª—è –¥–æ—Å—Ç–∞–≤–∫–∏</label>
                <textarea class="form-input" id="delivery-address" rows="2" placeholder="–£–∫–∞–∂–∏—Ç–µ –∞–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏"></textarea>
            </div>

            <div class="form-group">
                <label>–ü—Ä–∏–º–µ—á–∞–Ω–∏—è –∫ –∑–∞–∫–∞–∑—É</label>
                <textarea class="form-input" id="order-notes" rows="3" placeholder="–û—Å–æ–±—ã–µ –ø–æ–∂–µ–ª–∞–Ω–∏—è, –∞–ª–ª–µ—Ä–≥–∏–∏ –∏ —Ç.–¥."></textarea>
            </div>

            <div class="form-group">
                <label>–°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã</label>
                <div class="payment-methods">
                    <label class="payment-method" onclick="selectPaymentMethod('cash')">
                        <input type="radio" name="payment_method" value="cash" class="radio-input">
                        üíµ –ù–∞–ª–∏—á–Ω—ã–µ
                    </label>
                    <label class="payment-method" onclick="selectPaymentMethod('card')">
                        <input type="radio" name="payment_method" value="card" class="radio-input">
                        üí≥ –ö–∞—Ä—Ç–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏
                    </label>
                    <label class="payment-method" onclick="selectPaymentMethod('online')">
                        <input type="radio" name="payment_method" value="online" class="radio-input">
                        üåê –û–Ω–ª–∞–π–Ω –æ–ø–ª–∞—Ç–∞
                    </label>
                </div>
            </div>

            <button class="checkout-btn" onclick="submitOrder()">‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∑–∞–∫–∞–∑</button>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–µ—Ç–∞–ª–µ–π —Ç–æ–≤–∞—Ä–∞ -->
    <div class="modal-overlay" id="item-modal">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title" id="item-modal-title">–¢–æ–≤–∞—Ä</h2>
                <button class="close-modal" onclick="closeItemModal()">√ó</button>
            </div>

            <div id="item-modal-content">
                <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω —á–µ—Ä–µ–∑ JS -->
            </div>
        </div>
    </div>

    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
        let userData = {};
        let cart = [];
        let menuData = {};
        let currentItem = null;

        // Telegram WebApp –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
        const tg = window.Telegram.WebApp;
        tg.expand();
        tg.BackButton.hide();

        // –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        if (tg.initDataUnsafe && tg.initDataUnsafe.user) {
            const user = tg.initDataUnsafe.user;
            userData = {
                id: user.id,
                username: user.username,
                firstName: user.first_name,
                lastName: user.last_name
            };

            // –û–±–Ω–æ–≤–ª—è–µ–º –∞–≤–∞—Ç–∞—Ä –∏ –∏–º—è
            document.getElementById('user-avatar').textContent =
                user.first_name ? user.first_name[0].toUpperCase() : 'U';
            document.getElementById('user-name').textContent =
                user.first_name + (user.last_name ? ' ' + user.last_name : '');
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –º–µ–Ω—é
        async function loadMenu() {
            try {
                // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—ã–ª –±—ã –∑–∞–ø—Ä–æ—Å –∫ API
                // –î–ª—è –¥–µ–º–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ
                menuData = {
                    coffee: {
                        name: "‚òï –ö–æ—Ñ–µ",
                        items: [
                            { id: 1, name: "–≠—Å–ø—Ä–µ—Å—Å–æ", description: "–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –∫—Ä–µ–ø–∫–∏–π –∫–æ—Ñ–µ", price: 150, sizes: ["30 –º–ª"], addons: ["–î–æ–ø. —à–æ—Ç", "–°–∏—Ä–æ–ø"] },
                            { id: 2, name: "–ê–º–µ—Ä–∏–∫–∞–Ω–æ", description: "–≠—Å–ø—Ä–µ—Å—Å–æ —Å –≥–æ—Ä—è—á–µ–π –≤–æ–¥–æ–π", price: 180, sizes: ["200 –º–ª", "300 –º–ª"], addons: ["–î–æ–ø. —à–æ—Ç", "–°–∏—Ä–æ–ø", "–ö–æ–∫–æ—Å–æ–≤–æ–µ –º–æ–ª–æ–∫–æ"] },
                            { id: 3, name: "–ö–∞–ø—É—á–∏–Ω–æ", description: "–≠—Å–ø—Ä–µ—Å—Å–æ —Å –º–æ–ª–æ—á–Ω–æ–π –ø–µ–Ω–∫–æ–π", price: 220, sizes: ["250 –º–ª", "350 –º–ª"], addons: ["–î–æ–ø. —à–æ—Ç", "–°–∏—Ä–æ–ø", "–ö–∞—Ä–∞–º–µ–ª—å"] }
                        ]
                    },
                    tea: {
                        name: "üçµ –ß–∞–π",
                        items: [
                            { id: 4, name: "–ß–µ—Ä–Ω—ã–π —á–∞–π", description: "–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π —á–µ—Ä–Ω—ã–π —á–∞–π", price: 120, sizes: ["300 –º–ª", "500 –º–ª"], addons: ["–õ–∏–º–æ–Ω", "–ú–µ–¥", "–ú–æ–ª–æ–∫–æ"] },
                            { id: 5, name: "–ó–µ–ª–µ–Ω—ã–π —á–∞–π", description: "–û—Å–≤–µ–∂–∞—é—â–∏–π –∑–µ–ª–µ–Ω—ã–π —á–∞–π", price: 120, sizes: ["300 –º–ª", "500 –º–ª"], addons: ["–õ–∏–º–æ–Ω", "–ú–µ–¥", "–ò–º–±–∏—Ä—å"] }
                        ]
                    }
                };

                renderMenu();
                loadCart();
                loadOrders();
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –º–µ–Ω—é:', error);
            }
        }

        // –†–µ–Ω–¥–µ—Ä –º–µ–Ω—é
        function renderMenu() {
            const container = document.getElementById('categories-container');
            let html = '';

            for (const [categoryKey, category] of Object.entries(menuData)) {
                html += `
                    <div class="category-title">
                        <span class="category-icon">${category.name.split(' ')[0]}</span>
                        <h3>${category.name}</h3>
                    </div>
                    <div class="menu-grid">
                `;

                category.items.forEach(item => {
                    html += `
                        <div class="menu-item" onclick="openItemModal(${item.id}, '${categoryKey}')">
                            <div class="item-header">
                                <div class="item-name">${item.name}</div>
                                <div class="item-price">${item.price} —Ä—É–±.</div>
                            </div>
                            <div class="item-description">${item.description}</div>
                            <div class="item-sizes">
                                ${item.sizes.map(size => `<span class="size-btn">${size}</span>`).join('')}
                            </div>
                        </div>
                    `;
                });

                html += `</div>`;
            }

            container.innerHTML = html;
        }

        // –û—Ç–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ —Ç–æ–≤–∞—Ä–∞
        function openItemModal(itemId, categoryKey) {
            const category = menuData[categoryKey];
            const item = category.items.find(i => i.id === itemId);
            currentItem = { ...item, category: categoryKey };

            document.getElementById('item-modal-title').textContent = item.name;

            let html = `
                <div class="item-description" style="margin-bottom: 20px;">${item.description}</div>

                <div class="form-group">
                    <label>–†–∞–∑–º–µ—Ä:</label>
                    <div class="item-sizes" id="item-sizes">
            `;

            item.sizes.forEach((size, index) => {
                html += `
                    <button class="size-btn ${index === 0 ? 'active' : ''}"
                            onclick="selectSize('${size}', this)">
                        ${size}
                    </button>
                `;
            });

            html += `
                    </div>
                </div>

                <div class="form-group">
                    <label>–î–æ–ø–æ–ª–Ω–µ–Ω–∏—è:</label>
                    <div class="addons-grid" id="item-addons">
            `;

            item.addons.forEach(addon => {
                html += `
                    <button class="addon-btn" onclick="toggleAddon('${addon}', this)">
                        ${addon}
                    </button>
                `;
            });

            html += `
                    </div>
                </div>

                <button class="add-btn" onclick="addToCart()">
                    üõí –î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É
                </button>
            `;

            document.getElementById('item-modal-content').innerHTML = html;
            document.getElementById('item-modal').classList.add('active');
        }

        function closeItemModal() {
            document.getElementById('item-modal').classList.remove('active');
        }

        function selectSize(size, element) {
            document.querySelectorAll('#item-sizes .size-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            element.classList.add('active');
            currentItem.selectedSize = size;
        }

        function toggleAddon(addon, element) {
            element.classList.toggle('active');
            if (!currentItem.selectedAddons) currentItem.selectedAddons = [];

            const index = currentItem.selectedAddons.indexOf(addon);
            if (index === -1) {
                currentItem.selectedAddons.push(addon);
            } else {
                currentItem.selectedAddons.splice(index, 1);
            }
        }

        // –†–∞–±–æ—Ç–∞ —Å –∫–æ—Ä–∑–∏–Ω–æ–π
        function addToCart() {
            if (!currentItem.selectedSize) {
                currentItem.selectedSize = currentItem.sizes[0];
            }

            const cartItem = {
                id: currentItem.id,
                name: currentItem.name,
                price: currentItem.price,
                size: currentItem.selectedSize,
                addons: currentItem.selectedAddons || [],
                quantity: 1
            };

            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —É–∂–µ —Ç–∞–∫–æ–π —Ç–æ–≤–∞—Ä
            const existingItemIndex = cart.findIndex(item =>
                item.id === cartItem.id &&
                item.size === cartItem.size &&
                JSON.stringify(item.addons) === JSON.stringify(cartItem.addons)
            );

            if (existingItemIndex !== -1) {
                cart[existingItemIndex].quantity += 1;
            } else {
                cart.push(cartItem);
            }

            saveCart();
            updateCartUI();
            closeItemModal();

            showNotification(`${currentItem.name} –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∫–æ—Ä–∑–∏–Ω—É!`);
        }

        function saveCart() {
            localStorage.setItem('coffee_shop_cart', JSON.stringify(cart));
            updateCartBadge();
        }

        function loadCart() {
            const savedCart = localStorage.getItem('coffee_shop_cart');
            if (savedCart) {
                cart = JSON.parse(savedCart);
            }
            updateCartUI();
            updateCartBadge();
        }

        function updateCartUI() {
            const container = document.getElementById('cart-items-container');
            const totalElement = document.getElementById('cart-total');

            if (cart.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: var(--text-light);">–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</p>';
                totalElement.textContent = '0 —Ä—É–±.';
                return;
            }

            let html = '';
            let total = 0;

            cart.forEach((item, index) => {
                const itemTotal = item.price * item.quantity;
                total += itemTotal;

                html += `
                    <div class="cart-item">
                        <div class="cart-item-info">
                            <h4>${item.name} (${item.size})</h4>
                            <p style="font-size: 14px; color: var(--text-light);">
                                ${item.addons.length > 0 ? '–î–æ–ø: ' + item.addons.join(', ') : '–ë–µ–∑ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–π'}
                            </p>
                            <p style="font-weight: bold; color: var(--primary);">${itemTotal} —Ä—É–±.</p>
                        </div>
                        <div class="cart-item-actions">
                            <button class="quantity-btn" onclick="updateQuantity(${index}, -1)">-</button>
                            <span style="font-weight: bold; min-width: 30px; text-align: center;">${item.quantity}</span>
                            <button class="quantity-btn" onclick="updateQuantity(${index}, 1)">+</button>
                        </div>
                    </div>
                `;
            });

            container.innerHTML = html;
            totalElement.textContent = total + ' —Ä—É–±.';
        }

        function updateQuantity(index, change) {
            cart[index].quantity += change;

            if (cart[index].quantity <= 0) {
                cart.splice(index, 1);
            }

            saveCart();
            updateCartUI();
        }

        function updateCartBadge() {
            const badge = document.getElementById('cart-badge');
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            badge.textContent = totalItems;
            badge.style.display = totalItems > 0 ? 'flex' : 'none';
        }

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫
        function openTab(tabName) {
            // –°–∫—Ä—ã—Ç—å –≤—Å–µ –≤–∫–ª–∞–¥–∫–∏
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });

            // –£–±—Ä–∞—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —É –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });

            // –ü–æ–∫–∞–∑–∞—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—É—é –≤–∫–ª–∞–¥–∫—É
            document.getElementById(tabName).classList.add('active');

            // –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –∫–Ω–æ–ø–∫—É
            document.querySelectorAll('.tab-btn').forEach(btn => {
                if (btn.textContent.includes(tabName === 'menu' ? '–ú–µ–Ω—é' :
                                            tabName === 'profile' ? '–ü—Ä–æ—Ñ–∏–ª—å' :
                                            tabName === 'orders' ? '–ú–æ–∏ –∑–∞–∫–∞–∑—ã' : '–ö–æ—Ä–∑–∏–Ω–∞')) {
                    btn.classList.add('active');
                }
            });

            // –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≤–∫–ª–∞–¥–∫–∏
            if (tabName === 'orders') {
                loadOrders();
            }
        }

        // –†–∞–±–æ—Ç–∞ —Å –ø—Ä–æ—Ñ–∏–ª–µ–º
        function saveProfile() {
            const phone = document.getElementById('phone').value;
            const email = document.getElementById('email').value;
            const address = document.getElementById('address').value;

            userData.phone = phone;
            userData.email = email;
            userData.address = address;

            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage
            localStorage.setItem('coffee_shop_profile', JSON.stringify(userData));

            // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
            document.getElementById('user-phone').textContent = phone || '–¢–µ–ª–µ—Ñ–æ–Ω –Ω–µ —É–∫–∞–∑–∞–Ω';

            showNotification('–ü—Ä–æ—Ñ–∏–ª—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω!');
        }

        function loadProfile() {
            const savedProfile = localStorage.getItem('coffee_shop_profile');
            if (savedProfile) {
                const profile = JSON.parse(savedProfile);
                document.getElementById('phone').value = profile.phone || '';
                document.getElementById('email').value = profile.email || '';
                document.getElementById('address').value = profile.address || '';
                document.getElementById('user-phone').textContent = profile.phone || '–¢–µ–ª–µ—Ñ–æ–Ω –Ω–µ —É–∫–∞–∑–∞–Ω';
            }
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–∫–∞–∑–æ–≤
        function loadOrders() {
            const orders = JSON.parse(localStorage.getItem('coffee_shop_orders') || '[]');
            const container = document.getElementById('orders-list');

            if (orders.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: var(--text-light);">–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∑–∞–∫–∞–∑–æ–≤</p>';
                return;
            }

            let html = '';

            orders.forEach(order => {
                const statusClass = `status-${order.status}`;
                const statusText = {
                    'pending': '–û–∂–∏–¥–∞–µ—Ç',
                    'confirmed': '–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω',
                    'preparing': '–ì–æ—Ç–æ–≤–∏—Ç—Å—è',
                    'ready': '–ì–æ—Ç–æ–≤',
                    'completed': '–í—ã–ø–æ–ª–Ω–µ–Ω',
                    'cancelled': '–û—Ç–º–µ–Ω–µ–Ω'
                }[order.status] || order.status;

                html += `
                    <div class="order-card">
                        <div class="order-header">
                            <div class="order-number">–ó–∞–∫–∞–∑ #${order.id}</div>
                            <div class="order-status ${statusClass}">${statusText}</div>
                        </div>
                        <div class="order-details">
                            <p>–°—É–º–º–∞: ${order.total} —Ä—É–±.</p>
                            <p>–¢–∏–ø: ${order.type === 'takeaway' ? '–ù–∞–≤—ã–Ω–æ—Å' : '–ù–∞ –º–µ—Å—Ç–µ'}</p>
                            <p>–î–∞—Ç–∞: ${order.date}</p>
                            ${order.items.map(item => `<p>${item.name} x${item.quantity}</p>`).join('')}
                        </div>
                    </div>
                `;
            });

            container.innerHTML = html;
        }

        // –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞
        function openCheckoutModal() {
            if (cart.length === 0) {
                showNotification('–î–æ–±–∞–≤—å—Ç–µ —Ç–æ–≤–∞—Ä—ã –≤ –∫–æ—Ä–∑–∏–Ω—É!');
                return;
            }

            document.getElementById('checkout-modal').classList.add('active');
        }

        function closeCheckoutModal() {
            document.getElementById('checkout-modal').classList.remove('active');
        }

        function selectOrderType(type) {
            document.querySelectorAll('.radio-label').forEach(label => {
                label.classList.remove('active');
            });

            document.querySelectorAll('.radio-input[value="takeaway"]')[0].parentElement.classList.toggle('active', type === 'takeaway');
            document.querySelectorAll('.radio-input[value="dine_in"]')[0].parentElement.classList.toggle('active', type === 'dine_in');

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º/—Å–∫—Ä—ã–≤–∞–µ–º –ø–æ–ª–µ –∞–¥—Ä–µ—Å–∞
            document.getElementById('address-field').style.display = type === 'takeaway' ? 'block' : 'none';
        }

        function selectDeliveryTime(type) {
            document.querySelectorAll('.radio-input[value="asap"]')[0].parentElement.classList.toggle('active', type === 'asap');
            document.querySelectorAll('.radio-input[value="later"]')[0].parentElement.classList.toggle('active', type === 'later');

            document.getElementById('time-slots-container').style.display = type === 'later' ? 'block' : 'none';

            if (type === 'later') {
                generateTimeSlots();
            }
        }

        function selectPaymentMethod(method) {
            document.querySelectorAll('.payment-method').forEach(el => {
                el.classList.remove('active');
            });

            document.querySelectorAll(`.payment-method input[value="${method}"]`)[0].parentElement.classList.add('active');
        }

        function generateTimeSlots() {
            const container = document.querySelector('.time-slots');
            let html = '';

            // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ª–æ—Ç–æ–≤ –Ω–∞ –±–ª–∏–∂–∞–π—à–∏–µ 2 —á–∞—Å–∞
            const now = new Date();
            now.setMinutes(Math.ceil(now.getMinutes() / 30) * 30); // –û–∫—Ä—É–≥–ª–µ–Ω–∏–µ –¥–æ –±–ª–∏–∂–∞–π—à–∏—Ö 30 –º–∏–Ω—É—Ç

            for (let i = 1; i <= 6; i++) {
                const time = new Date(now.getTime() + i * 30 * 60000);
                const timeString = time.toLocaleTimeString('ru-RU', { hour: '2-digit', minute: '2-digit' });

                html += `
                    <div class="time-slot" onclick="selectTimeSlot('${time.toISOString()}', this)">
                        ${timeString}
                    </div>
                `;
            }

            container.innerHTML = html;
        }

        function selectTimeSlot(time, element) {
            document.querySelectorAll('.time-slot').forEach(el => {
                el.classList.remove('active');
            });
            element.classList.add('active');
            document.getElementById('selected-time').value = time;
        }

        function submitOrder() {
            const orderType = document.querySelector('.radio-input[name="order_type"]:checked')?.value || 'takeaway';
            const deliveryTime = document.querySelector('.radio-input[name="delivery_time"]:checked')?.value;
            const address = document.getElementById('delivery-address').value;
            const notes = document.getElementById('order-notes').value;
            const paymentMethod = document.querySelector('.payment-method.active input')?.value || 'cash';

            if (orderType === 'takeaway' && !address) {
                showNotification('–£–∫–∞–∂–∏—Ç–µ –∞–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏!');
                return;
            }

            // –°–æ–∑–¥–∞–µ–º –∑–∞–∫–∞–∑
            const order = {
                id: 'ORD' + Date.now().toString().slice(-6),
                items: [...cart],
                total: cart.reduce((sum, item) => sum + (item.price * item.quantity), 0),
                type: orderType,
                address: orderType === 'takeaway' ? address : '–í –∫–æ—Ñ–µ–π–Ω–µ',
                notes: notes,
                paymentMethod: paymentMethod,
                status: 'pending',
                date: new Date().toLocaleDateString('ru-RU')
            };

            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∑–∞–∫–∞–∑
            const orders = JSON.parse(localStorage.getItem('coffee_shop_orders') || '[]');
            orders.unshift(order);
            localStorage.setItem('coffee_shop_orders', JSON.stringify(orders));

            // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –≤ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ Telegram WebApp
            tg.sendData(JSON.stringify({
                action: 'create_order',
                ...order
            }));

            // –û—á–∏—â–∞–µ–º –∫–æ—Ä–∑–∏–Ω—É
            cart = [];
            saveCart();
            updateCartUI();

            closeCheckoutModal();
            openTab('orders');

            showNotification('–ó–∞–∫–∞–∑ —É—Å–ø–µ—à–Ω–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω!');
        }

        // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
        function showNotification(message) {
            // –°–æ–∑–¥–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                left: 50%;
                transform: translateX(-50%) translateY(-100px);
                background: var(--primary);
                color: white;
                padding: 15px 25px;
                border-radius: 10px;
                z-index: 10000;
                font-weight: bold;
                box-shadow: var(--shadow);
                transition: transform 0.3s ease;
            `;
            notification.textContent = message;
            document.body.appendChild(notification);

            // –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è
            setTimeout(() => {
                notification.style.transform = 'translateX(-50%) translateY(0)';
            }, 10);

            // –£–¥–∞–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
            setTimeout(() => {
                notification.style.transform = 'translateX(-50%) translateY(-100px)';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }

        function toggleCart() {
            openTab('cart');
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        document.addEventListener('DOMContentLoaded', () => {
            loadMenu();
            loadProfile();

            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
            selectOrderType('takeaway');
            selectDeliveryTime('asap');
            selectPaymentMethod('cash');
        });
    </script>
</body>
</html>